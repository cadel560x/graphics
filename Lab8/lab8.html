<!DOCTYPE html>
<html>
    <!-- 1) This file -->
    <head>
        <meta charset="UTF-8">
        <title>Three Dimension Graphics</title>
        <style type="text/css"></style>
        <!-- 2) Include 'three.js' to this file -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/88/three.js"></script>
    </head>
    <body>
        <script type="text/javascript">
            // 3) Add a scene
            var scene = new THREE.Scene();

            // 4) Creating and adding a sphere
            var geometry = new THREE.SphereGeometry(5, 32, 32);

            // 9) 'wireframe: true'
            // var material = new THREE.MeshBasicMaterial({color: 0xff00ff, wireframe: true});

            // 10) Wireframe reset
            // var material = new THREE.MeshBasicMaterial({color: 0xff00ff});

            // 12) Change of material to 'MeshLambertMaterial'
            var material = new THREE.MeshLambertMaterial({color: 0xff00ff});         
            
            var sphere = new THREE.Mesh(geometry, material);
            scene.add(sphere);

            // 5) Add a camera
            var camera = new THREE.PerspectiveCamera(80, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.z = 55;

            // 6) Add a renderer
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // 13) 'speed' vector used to alternate movement once the bounds are reached
            var speedSense = 1;
            var speedMagnitud = 0.4

            var noSteps = 0;
            var hexColor = sphere.material.color.getHex();

            // 7) Render loop
            function repeatMe() {
                renderer.render(scene, camera);
                sphere.rotateX(Math.PI/180);
                sphere.rotateY(Math.PI/180);

                // 13) Movieng the sphere with 'translate'
                // sphere.translateX(1);
                // sphere.translateY(1);

                // Using the 'position' property is better.
                // The 'position' property has three properties: 'x', 'y' and 'z'
                sphere.position.x += speedMagnitud*speedSense;

                if (sphere.position.x < -80 || sphere.position.x > 80) {
                    speedSense *= -1;
                }

                // 14) Slow color change
                hexColor = material.color.getHex() + 0x101010;
                if (noSteps < 500) {
                    // console.log("material color:", material.color);
                    console.log("hexColor +: ", hexColor.toString(2));
                }

                hexColor = hexColor & 0x000000111111;
                
                if (noSteps < 500) {
                    // console.log("material color:", material.color);
                    console.log("hexColor and: ", hexColor.toString(2));
                }

                hexColor = hexColor | 0xF000F;
                
                if (noSteps < 500) {
                    // console.log("material color:", material.color);
                    console.log("hexColor or: ", hexColor.toString(2));
                }

                material.color.setHex(hexColor);

                // if (material.color.getHex() > 0xffffff ) {
                //     material.color.setHex(0x000000);
                // }

                // if (material.color.r > 1 ) {
                //     material.color.r = 0;
                // }

                // if (material.color.g > 1 ) {
                //     material.color.g = 0;
                // }

                // if (material.color.b > 1 ) {
                //     material.color.b = 0;
                // }

                noSteps++;

                requestAnimationFrame(repeatMe);
            }

            // 11) Directional light
            var directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
            directionalLight.position.set(0, 1, 2);
            scene.add(directionalLight);

            console.log("hexColor: ", hexColor.toString(16));
            // sphere.material.color.setHex(0);

            // 7) Call render loop
            repeatMe();
        </script>
    </body>
</html>