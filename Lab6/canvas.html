<!DOCTYPE html>
<html>
    <!-- 1) Create this HTML file -->
    <head>
        <title>Transformations</title>
        <meta charset="UTF-8">
        <style type="text/css"></style>
    </head>
    <body>
        <!-- 2) Create a canvas -->
        <canvas id="transformcan"></canvas>
        <script type="text/javascript">
            // 2) Gets a handle to the element with id 'transformcan'.
		    var canvas = document.getElementById("transformcan");
		    var ctx = canvas.getContext("2d");
            function init() {
			    canvas.width = 1220;
			    canvas.height = 600;
			    canvas.style.border = "solid 1px black";
		    }

		    init();

            // 3) Create a pacman
            class Position {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                }
            } // Position class

            class Pacman {
                constructor(x, y, r, color) {
                    this.position = new Position(x, y, color);
                    this.radius = r;
                    this.color = color;
                }

                draw() {
                    ctx.beginPath();
			        ctx.arc(this.position.x, this.position.y, this.radius, 1.75*Math.PI, 0.25*Math.PI, true);
			        ctx.lineTo(this.position.x, this.position.y);
			        ctx.lineTo(this.position.x + (this.radius * Math.cos(0.25*Math.PI)), this.position.y + (this.radius * Math.sin(1.75*Math.PI)));
			        ctx.stroke();
			        ctx.fillStyle = this.color;
			        ctx.fill();
                }
            } // Pacman class

            // 3)
            var pacman1 = new Pacman(0, 0, 50, "yellow");

            // 4)
            function clear() {
                ctx.save();
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.restore();
            }

            // 6) Set the global variable nosteps to 0 and initial translation
            var nosteps = 0;
            ctx.translate(70, 70);

            // 5) Animation using 'repeatme()' function
            function repeatme() {
                clear();                
                pacman1.draw();

                nosteps++;
                // 5) Translates the context by (1,0)
                // ctx.translate(1, 0);

                //  8) Translate using ctx.transform()
                //     e = 1
                //     f = 0
                ctx.transform(1, 0, 0, 1, 1, 0);

                // 5) Rotates by π/2 radians every 400 steps.
                if (nosteps == 400) {
                    nosteps = 0;

                    // 5) Rotates by π/2 radians
                    // ctx.rotate(Math.PI/2);

                    //  9) Translate using ctx.transform()
                    //     a = cos( π/2 ) = 0
                    //     b = sin( π/2 ) = 1
                    //     c = -sin( π/2 ) = -1
                    //     d = cos( π/2 ) = 0
                    //     e = 0
                    //     f = 0
                    ctx.transform(0, 1, -1, 0, 0, 0);
                }
                
                
                requestAnimationFrame(repeatme);
            }

            // 7) Start animation by calling the 'repeatme()' function.
            repeatme();

        </script>
    </body>
</html>