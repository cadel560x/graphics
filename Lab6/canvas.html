<!DOCTYPE html>
<html>
    <!-- 1) Create this HTML file -->
    <head>
        <title>Transformations</title>
        <meta charset="UTF-8">
        <style type="text/css"></style>
    </head>
    <body>
        <!-- 2) Create a canvas -->
        <canvas id="transformcan"></canvas>
        <script type="text/javascript">
            // 2) Gets a handle to the element with id 'transformcan'.
		    var canvas = document.getElementById("transformcan");
		    var ctx = canvas.getContext("2d");
            function init() {
			    canvas.width = 1220;
			    canvas.height = 600;
			    canvas.style.border = "solid 1px black";
		    }

		    init();

            // 3) Create a pacman
            class Position {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                }
            } // Position class

            class Pacman {
                constructor(x, y, r, color) {
                    this.position = new Position(x, y, color);
                    this.radius = r;
                    this.color = color;
                }

                draw() {
                    ctx.beginPath();
			        ctx.arc(this.position.x, this.position.y, this.radius, 1.75*Math.PI, 0.25*Math.PI, true);
			        ctx.lineTo(this.position.x, this.position.y);
			        ctx.lineTo(this.position.x + (this.radius * Math.cos(0.25*Math.PI)), this.position.y + (this.radius * Math.sin(1.75*Math.PI)));
			        ctx.stroke();
			        ctx.fillStyle = this.color;
			        ctx.fill();
                }
            } // Pacman class

            // 3)
            var pacman1 = new Pacman(0, 0, 50, "yellow");

            // 4)
            function clear() {
                ctx.save();
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.restore();
            }

            // 6)
            var nosteps = 0;
            ctx.translate(70, 70);

            // 5)
            function repeatme() {
                clear();                
                pacman1.draw();

                nosteps++;
                ctx.translate(1, 0);

                if (nosteps == 400) {
                    nosteps = 0;

                    ctx.rotate(Math.PI/2);
                }
                
                
                requestAnimationFrame(repeatme);
            }

            repeatme();

        </script>
    </body>
</html>